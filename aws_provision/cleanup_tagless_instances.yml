---
  - name: sample play to lunch ec2 instance
    hosts: localhost
    connection: local
    gather_facts: false
    tasks:
      - name: Info about ec2 using ec2_instance_facts
        ec2_instance_facts: 
          region: ap-south-1 
        register: ec2_info
      - name: terminating ec2 instances
        ec2:
          region: ap-south-1
          instance_ids: "{{item.instance_id}}"
          state: absent
        with_items: "{{ec2_info.instances}}"
        when: item.tags.keys()|length == 0

         
        
